<!DOCTYPE html>
<html lang="en">
<head>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <meta charset="UTF-8">
    <title>Electricity Bill Predictor</title>

    <!-- Bootstrap CSS -->
    <link
      href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css"
      rel="stylesheet">

    <style>
        body {
            background: linear-gradient(to right, #eef2f3, #d9e7ff);
            min-height: 100vh;
        }
        .card {
            border-radius: 15px;
        }
        h2 {
            font-weight: bold;
            color: #0d6efd;
        }
    </style>
</head>

<body>

<div class="container mt-5">
    <div class="row justify-content-center">
        <div class="col-md-8">

            <div class="card shadow p-4">
                <h2 class="text-center mb-4">
                    ‚ö° Indian Household Electricity Bill Predictor
                </h2>

                <form method="post">

                    <div class="row">
                        <div class="col-md-6 mb-3">
                            <label>Units Consumed</label>
                            <input type="number" name="units" class="form-control" required>
                        </div>

                        <div class="col-md-6 mb-3">
                            <label>Family Members</label>
                            <input type="number" name="members" class="form-control" required>
                        </div>
                    </div>

                    <div class="row">
                        <div class="col-md-4 mb-3">
                            <label>AC Hours / Day</label>
                            <input type="number" name="ac" class="form-control">
                        </div>

                        <div class="col-md-4 mb-3">
                            <label>Fan Hours / Day</label>
                            <input type="number" name="fan" class="form-control">
                        </div>

                        <div class="col-md-4 mb-3">
                            <label>Fridge Hours / Day</label>
                            <input type="number" name="fridge" class="form-control">
                        </div>
                    </div>

                    <div class="row">
                        <div class="col-md-6 mb-3">
                            <label>Washing Machine (times/week)</label>
                            <input type="number" name="washing" class="form-control">
                        </div>

                        <div class="col-md-6 mb-3">
                            <label>TV Hours / Day</label>
                            <input type="number" name="tv" class="form-control">
                        </div>
                    </div>

                    <div class="row">
                        <div class="col-md-6 mb-3">
                            <label>Work / Study from Home?</label>
                            <select name="wfh" class="form-select">
                                <option value="yes">Yes</option>
                                <option value="no">No</option>
                            </select>
                        </div>

                        <div class="col-md-6 mb-3">
                            <label>Daily Geyser Usage?</label>
                            <select name="geyser" class="form-select">
                                <option value="yes">Yes</option>
                                <option value="no">No</option>
                            </select>
                        </div>
                    </div>

                    <div class="row">
                        <div class="col-md-6 mb-3">
                            <label>Festival / Event Month?</label>
                            <select name="festival" class="form-select">
                                <option value="yes">Yes</option>
                                <option value="no">No</option>
                            </select>
                        </div>

                        <div class="col-md-6 mb-3">
                            <label>Summer Month?</label>
                            <select name="summer" class="form-select">
                                <option value="yes">Yes</option>
                                <option value="no">No</option>
                            </select>
                        </div>
                    </div>

                    <div class="text-center">
                        <button class="btn btn-primary px-5">
                            üîç Predict Bill
                        </button>
                    </div>

                </form>

                {% if bill %}
                <hr>

                <div class="alert alert-success mt-3">
                    <h4>Estimated Electricity Bill: ‚Çπ{{ bill }}</h4>
                </div>

                <div class="alert alert-warning">
                    <h5>üí° Energy Saving Suggestions</h5>
                    <ul>
                        {% if bill %}
<hr>

<h4 class="text-center mt-4">üìä Appliance Usage Visualization</h4>

<canvas id="usageChart" height="120"></canvas>

<script>
    const ctx = document.getElementById('usageChart').getContext('2d');

    const usageChart = new Chart(ctx, {
        type: 'bar',
        data: {
            labels: {{ usage_data.keys()|list | safe }},
            datasets: [{
                label: 'Hours Used',
                data: {{ usage_data.values()|list | safe }},
                backgroundColor: [
                    '#0d6efd', '#198754', '#ffc107', '#dc3545', '#6f42c1'
                ]
            }]
        },
        options: {
            responsive: true,
            plugins: {
                legend: { display: false }
            },
            scales: {
                y: {
                    beginAtZero: true
                }
            }
        }
    });
</script>
{% endif %}

                        {% for s in suggestions %}
                        <li>{{ s }}</li>
                        {% endfor %}
                    </ul>
                </div>
                {% endif %}

            </div>
        </div>
    </div>
</div>

</body>
</html>
